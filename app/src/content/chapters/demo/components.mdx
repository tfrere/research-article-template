import { Image } from 'astro:assets';
import placeholder from '../../assets/image/placeholder.png';
import audioDemo from '../../assets/audio/audio-example.wav';
import HtmlEmbed from '../../../components/HtmlEmbed.astro';
import Sidenote from '../../../components/Sidenote.astro';
import Wide from '../../../components/Wide.astro';
import Note from '../../../components/Note.astro';
import FullWidth from '../../../components/FullWidth.astro';
import Accordion from '../../../components/Accordion.astro';
import Figure from '../../../components/ResponsiveImage.astro';
import SubFigures from '../../../components/MultiImage.astro';
import Quote from '../../../components/Quote.astro';

## Components

**All** the following **components** are available in the **article.mdx** file. You can also create your own **components** by creating a new file in the `/components` folder.

### How to import components

To use any component in your MDX file, add the import statement at the top:

```mdx
import Figure from '../components/ResponsiveImage.astro';
import SubFigures from '../components/MultiImage.astro';
import Note from '../components/Note.astro';

# Your content

<Figure src={myImage} alt="Description" />
<Note>This is a note</Note>
```

Here are the components that are available:


<div className="feature-grid">
  <a href="#figure" className="feature-card">
    <strong>Figure</strong>
    <span>Optimized images</span>
  </a>
  <a href="#subfigures" className="feature-card">
    <strong>SubFigures</strong>
    <span>Multi-panel figures</span>
  </a>
  <a href="#placement" className="feature-card">
    <strong>Placement</strong>
    <span>Layout helpers</span>
  </a>
  <a href="#accordion" className="feature-card">
    <strong>Accordion</strong>
    <span>Collapsible content</span>
  </a>
  <a href="#note" className="feature-card">
    <strong>Note</strong>
    <span>Contextual callouts</span>
  </a>
  <a href="#quote" className="feature-card">
    <strong>Quote</strong>
    <span>Elegant citations</span>
  </a>
  <a href="#htmlembed" className="feature-card">
    <strong>HtmlEmbed</strong>
    <span>External content</span>
  </a>
  <a href="#iframe" className="feature-card">
    <strong>Iframe</strong>
    <span>Web embeds</span>
  </a>
</div>

### Figure

**Figures** automatically generate optimized `srcset` and `sizes` so the browser downloads the most appropriate file for the current viewport and DPR. You can also request multiple output formats (e.g., **AVIF**, **WebP**, fallback **PNG/JPEG**) and control **lazy loading/decoding** for better **performance**.


<Figure
  src={placeholder}
  zoomable
  downloadable
  id="placeholder-image"
  layout="fixed"
  alt="A placeholder image alt text"
  caption={'A placeholder image description<br/> Credit: <a target="_blank" href="https://commons.wikimedia.org/wiki/File:RCA_Indian_Head_Test_Pattern.svg">RCA Indian Head Test Pattern</a>'}
/>

| Prop                   | Required | Description                                                                                                         
|------------------------|----------|-------------------------------------------------------
| `zoomable`        | No       | Adds a zoomable lightbox (Medium-like).                                                                             
| `downloadable`    | No       | Adds a download button to fetch the image file.                                                               
| `loading="lazy"`       | No       | Lazy loads the image.                                                                                               
| `caption`              | No       | Adds a caption and credit.                                                                                          
| `id`              | No       | Adds an `id` to the outer figure for deep-linking and cross-references.                                                                                          


<Accordion title="Code example">
```mdx
import Figure from '../../../components/ResponsiveImage.astro'
import myImage from './assets/image/placeholder.jpg'

<Figure src={myImage} alt="Optimized figure with caption" />

<Figure
  src={myImage}
  layout="fixed"
  zoomable
  downloadable
  loading="lazy"
  alt="Example with caption and credit"
  caption={'Optimized image with a descriptive caption. <span class="image-credit">Credit: Photo by <a href="https://example.com">Author</a></span>'}
/>
```
</Accordion>

### SubFigures

**Display multiple figures** in a grid layout with customizable columns and captions. Perfect for **multi-panel figures**, **comparisons**, and **step-by-step visualizations** — just like LaTeX's `subfigure` environment.

<SubFigures
  images={[
    { src: placeholder, alt: "Image 1", caption: "First image with caption" },
    { src: placeholder, alt: "Image 2", caption: "Second image" },
    { src: placeholder, alt: "Image 3", caption: "Third image description" }
  ]}
  layout="3-column"
  caption="Gallery of three images with individual captions"
  zoomable={true}
/>

<Accordion title="Code example">
```mdx
import placeholder from '../assets/image/placeholder.png';

<SubFigures
  images={[
    { src: placeholder, alt: "Panel A", caption: "(a) First panel" },
    { src: placeholder, alt: "Panel B", caption: "(b) Second panel" },
    { src: placeholder, alt: "Panel C", caption: "(c) Third panel" }
  ]}
  layout="3-column"
  caption="Figure 1: Multi-panel comparison showing different conditions"
  zoomable={true}
/>
```
</Accordion>

**Layout options:** `2-column`, `3-column`, `4-column`, `auto`  
**Features:** Individual subcaptions (a), (b), (c), zoom functionality, responsive design

### Placement

Use these helpers when you need to step outside the main content flow: **Sidenotes** for contextual side notes, **Wide** to extend beyond the main column, and **Full-width** for full-width, immersive sections.

#### Sidenotes

This paragraph presents a **key idea** concisely.

<Sidenote>
  **Side note** for brief context or a definition.
</Sidenote>

<Accordion title="Code example">
```mdx
import Sidenote from '../../../components/Sidenote.astro'

Main paragraph with the core idea.
<Sidenote>Short side note.</Sidenote>
```
</Accordion>


#### Wide example

<Wide>
  <div className="demo-wide">demo wide</div>
</Wide>

<Accordion title="Code example">
```mdx
import Wide from '../../../components/Wide.astro'

<Wide>
  Your content here...
</Wide>
```
</Accordion>

#### Full-width example

<FullWidth>
  <div className="demo-full-width">demo full-width</div>
</FullWidth>

<Accordion title="Code example">
```mdx
import FullWidth from '../../../components/FullWidth.astro'

<FullWidth>
  Your content here...
</FullWidth>
```
</Accordion>


### Accordion

Can be used like this `<Accordion>some content</Accordion>`. You can pass any children content.

<Accordion title="What can this accordion hold?" open>
  <p>Text, lists, images, code blocks, etc.</p>
  <ul>
    <li>Item one</li>
    <li>Item two</li>
  </ul>
</Accordion>

<Accordion title="A table inside an accordion">
  | Prop        | Required | Description                                                                                      
|-------------|----------|----------------------------------------------------------------------------------
| `src`       | Yes      | Path to the embed file in the `embeds` folder.                                                   
| `title`     | No       | Short title displayed above the card.                                                            
| `desc`      | No       | Short description displayed below the card. Supports inline HTML (e.g., links).                  
| `frameless` | No       | Removes the card background and border for seamless embeds.                                      
| `align`     | No       | Aligns the title/description text. One of `left` (default), `center`, `right`.                  
| `id`        | No       | Adds an `id` to the outer figure for deep-linking and cross-references.                        
</Accordion>

<Accordion title="Code example">
````mdx
import Accordion from '../../../components/Accordion.astro'

<Accordion title="Accordion title" open>
  <p>Free content with <strong>markdown</strong> and MDX components.</p>
</Accordion>

<Accordion title="A table inside an accordion">
  | Prop        | Required | Description                                                                                      
|-------------|----------|----------------------------------------------------------------------------------
| `src`       | Yes      | Path to the embed file in the `embeds` folder.                                                   
| `title`     | No       | Short title displayed above the card.                                                            
| `desc`      | No       | Short description displayed below the card. Supports inline HTML (e.g., links).                  
| `frameless` | No       | Removes the card background and border for seamless embeds.                                      
| `align`     | No       | Aligns the title/description text. One of `left` (default), `center`, `right`.                  
| `id`        | No       | Adds an `id` to the outer figure for deep-linking and cross-references.                        
</Accordion>

<Accordion title="Code example">
```ts
function greet(name: string) {
  console.log(`Hello, ${name}`);
}

greet("Astro");
```
</Accordion>
````
</Accordion>

### Note

Small contextual callout for tips, caveats, or emphasis.

<Note title="Heads‑up" emoji="💡" variant="info">
  Use notes to surface context without breaking reading flow.
</Note>

<Note variant="success">
  Operation completed successfully.
</Note>

<Note variant="danger">
  Be careful: this action cannot be undone.
</Note>

<Note>
  Plain note without header. Useful for short clarifications.
</Note>

| Prop     | Required | Type                         | Description                         |
|----------|----------|------------------------------|-------------------------------------|
| `title`  | No       | string                       | Short title displayed in header     |
| `emoji`  | No       | string                       | Emoji displayed before the title    |
| `class`  | No       | string                       | Extra classes for custom styling    |
| `variant`| No       | 'info' | 'success' | 'danger' | Visual intent of the note          |

<Accordion title="Code example">
```mdx
import Note from '../../../components/Note.astro'

<Note title="Heads‑up" emoji="💡" variant="info">
  Use notes to surface context without breaking reading flow.
</Note>

<Note variant="success">
  Operation completed successfully.
</Note>

<Note variant="danger">
  Be careful: this action cannot be undone.
</Note>

<Note>
  Plain note without header. Useful for short clarifications.
</Note>
```
</Accordion>

### Quote

Elegant quotes with optional author attribution.

<Quote author="Geoffrey Hinton">
  The brain has about 10^14 synapses and we only live for about 10^9 seconds. So we have a lot more parameters than data. This motivates the idea that we must do a lot of unsupervised learning since labeled examples are so limited.
</Quote>

| Prop     | Required | Type   | Description                    |
|----------|----------|--------|--------------------------------|
| `author` | No       | string | Author of the quote           |
| `source` | No       | string | Source publication or context |

<Accordion title="Code example">
```mdx
import Quote from '../../../components/Quote.astro'

<Quote author="Geoffrey Hinton">
  The brain has about 10^14 synapses and we only live for about 10^9 seconds. So we have a lot more parameters than data. This motivates the idea that we must do a lot of unsupervised learning since labeled examples are so limited.
</Quote>
```
</Accordion>

### Iframes

You can embed external content in your article using **iframes**. For example, **TrackIO**, **Gradio** or even **Github code embeds** can be used this way.

<small className="muted">Gradio embed example</small>
<div className="card">
<iframe src="https://gradio-hello-world.hf.space" width="100%" height="380" frameborder="0"></iframe>
</div>
<div className="card">
<iframe src="https://trackio-documentation.hf.space/?project=fake-training-750735&metrics=train_loss,train_accuracy&sidebar=hidden&lang=en" width="100%" height="630" frameborder="0"></iframe>
</div>
<Accordion title="Code example">
```mdx
<iframe frameborder="0" scrolling="no" style="width:100%; height:292px;" allow="clipboard-write" src="https://emgithub.com/iframe.html?target=https%3A%2F%2Fgithub.com%2Fhuggingface%2Fpicotron%2Fblob%2F1004ae37b87887cde597c9060fb067faa060bafe%2Fsetup.py&style=default&type=code&showBorder=on&showLineNumbers=on"></iframe>
<iframe src="https://trackio-documentation.hf.space/?project=fake-training-750735&metrics=train_loss,train_accuracy&sidebar=hidden&lang=en" width="100%" height="600" frameborder="0"></iframe>
<iframe src="https://gradio-hello-world.hf.space" width="100%" height="380" frameborder="0"></iframe>
```
</Accordion>


### HtmlEmbed

The main purpose of the ```HtmlEmbed``` component is to **embed** a **Plotly** or **D3.js** chart in your article. **Libraries** are already imported in the template.

They exist in the `app/src/content/embeds` folder.

For researchers who want to stay in **Python** while targeting **D3**, the [d3blocks](https://github.com/d3blocks/d3blocks) library lets you create interactive D3 charts with only a few lines of code. In **2025**, **D3** often provides more flexibility and a more web‑native rendering than **Plotly** for custom visualizations.


<HtmlEmbed src="d3-line.html" title="This is a chart title" desc="Figure X: Some chart description<br/>Credit: <a href='https://example.com' target='_blank'>Example</a>" />

| Prop        | Required | Description                                                                                      
|-------------|----------|----------------------------------------------------------------------------------
| `src`       | Yes      | Path to the embed file in the `embeds` folder.                                                   
| `title`     | No       | Short title displayed above the card.                                                            
| `desc`      | No       | Short description displayed below the card. Supports inline HTML (e.g., links).                  
| `frameless` | No       | Removes the card background and border for seamless embeds.                                      
| `align`     | No       | Aligns the title/description text. One of `left` (default), `center`, `right`.                  
| `id`        | No       | Adds an `id` to the outer figure for deep-linking and cross-references.                        
| `data`      | No       | Path (string) or array of paths (string[]) to data file(s) consumed by the embed.              
| `config`    | No       | Optional object for embed options (e.g., `{ defaultMetric: 'average_rank' }`).                

<Accordion title="Code example">
```mdx
import HtmlEmbed from '../../../components/HtmlEmbed.astro'

<HtmlEmbed src="d3-line.html" title="This is a chart title" desc="Some chart description <br/>Credit: <a href='https://example.com' target='_blank'>Example</a>" />

<HtmlEmbed
  src="d3-line.html"
  title="Comparison A vs B"
  data={[ 'formatting_filters.csv', 'relevance_filters.csv' ]}
  config={{ defaultMetric: 'average_rank' }}
/>
```
</Accordion>


#### Data

If you need to link your **HTML embeds** to **data files**, there is an **`assets/data`** folder for this.
As long as your files are there, they will be served from the **`public/data`** folder.
You can fetch them with this address: **`[domain]/data/your-data.ext`**

<Note emoji="⚠️" variant="danger"><b>Be careful</b>, unlike images, <b>data files are not optimized</b> by Astro. You need to optimize them manually.</Note>
