<div class="d3-data-packing"></div>
<style>
    .d3-data-packing {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f5f5f5;
    }

    .d3-data-packing .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .d3-data-packing .section {
        margin-bottom: 40px;
    }

    .d3-data-packing .section-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        text-align: center;
        color: #333;
    }

    .d3-data-packing .dataset {
        display: flex;
        flex-wrap: wrap;
        gap: 3px;
        justify-content: center;
        margin-bottom: 20px;
    }

    .d3-data-packing .grid {
        display: grid;
        gap: 3px;
        margin: 0 auto;
        width: fit-content;
    }

    .d3-data-packing .block {
        width: 30px;
        height: 30px;
        border: 2px solid #333;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: bold;
        color: white;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
    }

    .d3-data-packing .red {
        background-color: #e74c3c;
    }

    .d3-data-packing .orange {
        background-color: #f39c12;
    }

    .d3-data-packing .yellow {
        background-color: #f1c40f;
    }

    .d3-data-packing .green {
        background-color: #2ecc71;
    }

    .d3-data-packing .lightblue {
        background-color: #3498db;
    }

    .d3-data-packing .blue {
        background-color: #2980b9;
    }

    .d3-data-packing .purple {
        background-color: #9b59b6;
    }

    .d3-data-packing .pink {
        background-color: #e91e63;
    }

    .d3-data-packing .gray {
        background-color: #bdc3c7;
    }

    .d3-data-packing .packing-false {
        grid-template-columns: repeat(7, 1fr);
    }

    .d3-data-packing .packing-true {
        grid-template-columns: repeat(7, 1fr);
    }

    .d3-data-packing .description {
        text-align: center;
        margin-top: 15px;
        color: #666;
        font-size: 14px;
    }

    .d3-data-packing .efficiency {
        background: #ecf0f1;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
        text-align: center;
    }

    .d3-data-packing .efficiency h3 {
        margin: 0 0 10px 0;
        color: #2c3e50;
    }

    .d3-data-packing .efficiency p {
        margin: 5px 0;
        color: #34495e;
    }
</style>
<script>
    (() => {
        const bootstrap = () => {
            const scriptEl = document.currentScript;
            let container = scriptEl ? scriptEl.previousElementSibling : null;
            if (!(container && container.classList && container.classList.contains('d3-data-packing'))) {
                const candidates = Array.from(document.querySelectorAll('.d3-data-packing'))
                    .filter((el) => !(el.dataset && el.dataset.mounted === 'true'));
                container = candidates[candidates.length - 1] || null;
            }
            if (!container) return;
            if (container.dataset) {
                if (container.dataset.mounted === 'true') return;
                container.dataset.mounted = 'true';
            }

            // Create the HTML structure
            container.innerHTML = `
        <div class="container">
          <div class="section">
            <h2 class="section-title">Dataset</h2>
            <div class="dataset">
              <!-- 7 red blocks -->
              <div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div>
              <!-- 3 orange blocks -->
              <div class="block orange">O</div><div class="block orange">O</div><div class="block orange">O</div>
              <!-- 4 yellow blocks -->
              <div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block yellow">Y</div>
              <!-- 7 green blocks -->
              <div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div>
              <!-- 10 light blue blocks -->
              <div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div>
              <!-- 3 blue blocks -->
              <div class="block blue">B</div><div class="block blue">B</div><div class="block blue">B</div>
              <!-- 5 purple blocks -->
              <div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div>
              <!-- 3 pink blocks -->
              <div class="block pink">K</div><div class="block pink">K</div><div class="block pink">K</div>
            </div>
            <div class="description">42 unorganized data blocks</div>
          </div>

          <div class="section">
            <h2 class="section-title">packing=False</h2>
            <div class="grid packing-false">
              <!-- Row 1: 7 red blocks -->
              <div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div>
              <!-- Row 2: 3 orange + 4 gray -->
              <div class="block orange">O</div><div class="block orange">O</div><div class="block orange">O</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div>
              <!-- Row 3: 4 yellow + 3 gray -->
              <div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div>
              <!-- Row 4: 7 green -->
              <div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div>
              <!-- Row 5: 7 light blue -->
              <div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div>
              <!-- Row 6: 3 light blue + 4 gray -->
              <div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div>
              <!-- Row 7: 3 blue + 4 gray -->
              <div class="block blue">B</div><div class="block blue">B</div><div class="block blue">B</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div><div class="block gray">-</div>
              <!-- Row 8: 5 purple + 2 gray -->
              <div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block gray">-</div><div class="block gray">-</div>
            </div>
            <div class="description">Sequential placement with wasted space (17 empty cells)</div>
          </div>

          <div class="section">
            <h2 class="section-title">packing=True</h2>
            <div class="grid packing-true">
              <!-- Row 1: 7 light blue -->
              <div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div><div class="block lightblue">L</div>
              <!-- Row 2: 7 pink -->
              <div class="block pink">K</div><div class="block pink">K</div><div class="block pink">K</div><div class="block pink">K</div><div class="block pink">K</div><div class="block pink">K</div><div class="block pink">K</div>
              <!-- Row 3: 7 red -->
              <div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div><div class="block red">R</div>
              <!-- Row 4: 7 green -->
              <div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div><div class="block green">G</div>
              <!-- Row 5: 7 purple -->
              <div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div><div class="block purple">P</div>
              <!-- Row 6: 4 yellow + 3 orange -->
              <div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block yellow">Y</div><div class="block orange">O</div><div class="block orange">O</div><div class="block orange">O</div>
            </div>
            <div class="description">Complete optimization with no wasted space (0 empty cells)</div>
          </div>

          <div class="efficiency">
            <h3>Packing Efficiency</h3>
            <p><strong>packing=False:</strong> 39 blocks used / 56 cells = 69.6% efficiency</p>
            <p><strong>packing=True:</strong> 42 blocks used / 42 cells = 100% efficiency</p>
            <p><strong>Gain:</strong> +30.4% efficiency and 14 cells saved</p>
          </div>
        </div>
      `;
        };

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', bootstrap, { once: true });
        } else {
            bootstrap();
        }
    })();
</script>